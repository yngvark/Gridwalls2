<!DOCTYPE html>
<html>
<head>
	<title>Welcome to nginx!</title>
	<style>
	    body {
	        width: 35em;
	        margin: 0 auto;
	        font-family: Tahoma, Verdana, Arial, sans-serif;
	    }
	</style>
	<script src="node_modules/stompjs/lib/stomp.js"></script>
	<script>
	    var ws = new WebSocket('ws://127.0.0.1:15674/ws');
		//var client = Stomp.client(ws);
	    var client = Stomp.over(ws);

	    var on_connect = function() {
	        console.log('connected');
/*
	        var subscription = client.subscribe("/queue/rpc_queue", function (msg) {
	        	console.log("RPC incoming:");
	        	console.log(msg);
	        	console.log(msg.headers);
	        	if (msg.body === "getGameConfig") {
	        		//var replyQueue = msg.headers.reply-to.substring(35);
	        		console.log("Reply queue: " + msg.headers["reply-to"]);
	    			client.send(msg.headers["reply-to"], {"content-type":"text/plain"}, "GAME CONFIG ANSWER");
	        	}
	        }, {
	        	"durable": false,
	        	"auto-delete": false,
	        	"exclusive": false
	        });
*/

//	    	client.send('/queue/test', {"content-type":"text/plain"}, "Hello from front end");

			var subscription = client.subscribe("/exchange/ZombieMoved", function(msg) {
				console.log("INCOMING ZOmbieMoved: ");
				console.log(msg);
			});
	    };

	    var on_error = function(error) {
	        console.log('error:');
	        console.log(error);
	    };

	    function disconnect() {
	    	client.disconnect(function() {
	    		console.log("Disocnnected! Cya");
	    	});
	    }

	    client.connect('guest', 'guest', on_connect, on_error, '/');
    </script>
</head>
<body>
<h1>Consume test</h1>

Se console log.
<button onclick="disconnect()">Disconnect</button>

</body>
</html>
